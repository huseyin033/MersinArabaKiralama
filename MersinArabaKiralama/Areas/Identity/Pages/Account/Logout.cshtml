@page
@model LogoutModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Çıkış Yapılıyor";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 text-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Yükleniyor...</span>
            </div>
            <h3 class="mt-3">Çıkış yapılıyor, lütfen bekleyiniz...</h3>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Sayfa yüklendikten hemen sonra çıkış işlemini başlat
        document.addEventListener('DOMContentLoaded', function() {
            // Çıkış işlemi için bir form oluştur
            const form = document.createElement('form');
            form.method = 'post';
            form.action = '/Identity/Account/Logout';
            
            // CSRF token'ını al ve forma ekle
            const token = document.querySelector('input[name="__RequestVerificationToken"]').value;
            const tokenInput = document.createElement('input');
            tokenInput.type = 'hidden';
            tokenInput.name = '__RequestVerificationToken';
            tokenInput.value = token;
            form.appendChild(tokenInput);
            
            // Formu sayfaya ekle ve gönder
            document.body.appendChild(form);
            form.submit();
        });
    </script>
}
